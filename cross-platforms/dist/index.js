!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).MetrixInAppApi={})}(this,(function(e){"use strict";class t{}const n="center_modal",i=!0;class o extends t{initialize(){console.log("platform: android"),window.onload=()=>{this.postMessageToNative({type:"rendering_complete",pageMetaData:this.getPageMetaData(),displayLocation:n,dragToDismissDisabled:!i})},window.onresize=()=>{this.postMessageToNative({type:"resize",pageMetaData:this.getPageMetaData(),displayLocation:n})}}close(){this.actionTaken({close:!0})}openUrl(e){this.actionTaken({action:{action_type:"U",url:e},close:!0})}sendEvent(e,t){this.newEvent(e,t)}sendResponse(e){if(!window.id)throw Error("Campaign id is undefined");this.postMessageToNative({type:"send_response",id:window.id,attributes:e?JSON.stringify(e):void 0})}postMessageToNative(e){console.log("postMessageToNative(): "+JSON.stringify(e));let t=JSON.stringify(e);if(!window.MetrixInAppBridge)throw Error("Metrix in-app bridge not found");window.MetrixInAppBridge.postMessage(t)}getPageMetaData(){const e=document.body.scrollHeight;return console.log("height:",e),{rect:{height:e}}}actionTaken(e){console.log("actionTaken(): "+e),this.postMessageToNative({type:"action_taken",body:e})}newEvent(e,t){if(!window.MetrixAnalyticsBridge)throw Error("Metrix analytic bridge not found");window.MetrixAnalyticsBridge.newEvent(e,t?JSON.stringify(t):void 0)}}var s=(e=>(e.CLOSE_ONSITE="CLOSE_ONSITE",e.OPEN_URL="OPEN_URL",e.SEND_EVENT="SEND_EVENT",e.SEND_RESPONSE="SEND_RESPONSE",e))(s||{});class d extends t{initialize(){console.log("platform: Web"),window.addEventListener("message",(e=>{var t,n;if("getDimensions"===(null==(t=e.data)?void 0:t.type)&&(null==(n=e.data)?void 0:n.id)===window.id){const e=document.body.scrollHeight,t=document.body.scrollWidth,n={id:window.id,type:"SCALE_IFRAME",payload:{width:t,height:e}};window.parent.postMessage(n,"*")}}))}close(){const e={type:s.CLOSE_ONSITE,id:window.id};window.parent.postMessage(e,"*")}openUrl(e){const t={type:s.OPEN_URL,payload:e,id:window.id};window.parent.postMessage(t,"*")}sendEvent(e,t){const n={type:s.SEND_EVENT,id:window.id,payload:{slug:e,attributes:t}};window.parent.postMessage(n,"*")}sendResponse(e){const t={type:s.SEND_RESPONSE,id:window.id,payload:{payload:e}};window.parent.postMessage(t,"*")}}const a='\n<svg\n      width=" 24"\n      height="24"\n      viewBox="0 0 24 24"\n      fill="none"\n      xmlns="http://www.w3.org/2000/svg"\n    >\n      <g clip-path="url(#clip0_2018_8399)">\n        <path\n          d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"\n          fill="#666"\n        />\n      </g>\n      <defs>\n        <clipPath id="clip0_2018_8399"><rect width="24" height="24" fill="white" /></clipPath>\n      </defs>\n    </svg>\n';let l;l=window.MetrixInAppBridge?new o:new d,l.initialize(),class{static addCloseButton(e){window.onload=()=>{const t=document.createElement("div");t.style.position="fixed",t.style.top="0.5rem",t.style.right="0.5rem",t.onclick=()=>e.close(),t.innerHTML=a,document.body.appendChild(t)}}}.addCloseButton(l),e.close=function(){l.close()},e.openUrl=function(e){if(!e)throw Error("Url is not provided inside openUrl method");l.openUrl(e)},e.sendEvent=function(e,t){if(!e)throw Error("Slug of event is not provided inside sendEvent method");l.sendEvent(e,t)},e.sendResponse=function(e){l.sendResponse(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
