!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).MetrixInAppApi={})}(this,(function(e){"use strict";class t{}const i="center_modal",n=!0;class o extends t{initialize(){const e=this.getPageMetaData();window.onload=()=>{this.postMessageToNative({type:"rendering_complete",pageMetaData:e,displayLocation:i,dragToDismissDisabled:!n})},window.onresize=()=>{this.postMessageToNative({type:"resize",pageMetaData:e,displayLocation:i})}}close(){this.actionTaken({close:!0})}openUrl(e){this.actionTaken({action:{action_type:"U",url:e},close:!0})}sendEvent(e,t){this.newEvent(e,t)}sendResponse(e){const t=window.id;if(!t)throw Error("Campaign id not found");window.MetrixInAppBridge.sendResponse(t,e?JSON.stringify(e):void 0)}postMessageToNative(e){console.log("postMessageToNative(): "+e);let t=JSON.stringify(e);if(!window.MetrixInAppBridge)throw Error("Metrix in-app bridge not found");window.MetrixInAppBridge.postMessage(t)}getPageMetaData(){let e=document.body,t=document.documentElement;return{rect:{height:Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}}}actionTaken(e){console.log("actionTaken(): "+e),this.postMessageToNative({type:"action_taken",body:e})}newEvent(e,t){if(!window.MetrixAnalyticsBridge)throw Error("Metrix analytic bridge not found");window.MetrixAnalyticsBridge.newEvent(e,t?JSON.stringify(t):void 0)}}var s=(e=>(e.CLOSE_ONSITE="CLOSE_ONSITE",e.OPEN_URL="OPEN_URL",e.SEND_EVENT="SEND_EVENT",e.SEND_RESPONSE="SEND_RESPONSE",e))(s||{});class d extends t{initialize(){}close(){const e={type:s.CLOSE_ONSITE,id:window.id};window.parent.postMessage(e,"*")}openUrl(e){const t={type:s.OPEN_URL,payload:e,id:window.id};window.parent.postMessage(t,"*")}sendEvent(e,t){const i={type:s.SEND_EVENT,id:window.id,payload:{slug:e,attributes:t}};window.parent.postMessage(i,"*")}sendResponse(e){const t={type:s.SEND_RESPONSE,id:window.id,payload:{attributes:e}};window.parent.postMessage(t,"*")}}let a;a=window.MetrixInAppBridge&&window.MetrixAnalyticsBridge?new o:new d,a.initialize(),e.close=function(){a.close()},e.openUrl=function(e){if(!e)throw Error("Url is not provided inside openUrl method");a.openUrl(e)},e.sendEvent=function(e,t){if(!e)throw Error("Slug of event is not provided inside sendEvent method");a.sendEvent(e,t)},e.sendResponse=function(e){a.sendResponse(e)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
